<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Clues</title>
    <script type="text/javascript">
    // Array of video URLs
    var videoLinks = [
        "video_clues/video1.mp4",
        "video_clues/video2.mp4",
        "video_clues/video3.mp4"
    ];

    // Time interval to prevent video change on reload (in milliseconds)
    var cooldownTime = 10 * 60 * 1000; // 10 minutes

    // Function to get the next video index based on previous scans
    function getNextVideoIndex() {
        // Get the last shown video index and timestamp from localStorage
        var lastIndex = sessionStorage.getItem('videoIndex') || -1;
        var lastTimestamp = sessionStorage.getItem('videoTimestamp') || 0;

        // Get the current time
        var currentTime = new Date().getTime();

        // Check if the cooldown time has passed since the last visit
        if (currentTime - lastTimestamp < cooldownTime) {
            // If cooldown hasn't passed, use the same video index
            return lastIndex;
        } else {
            // If cooldown has passed, calculate the next video index
            // Use Math.random() to determine a new index
            var nextIndex = (parseInt(lastIndex) + 1) % videoLinks.length;

            // Store the new index and current timestamp in sessionStorage
            sessionStorage.setItem('videoIndex', nextIndex);
            sessionStorage.setItem('videoTimestamp', currentTime);

            return nextIndex;
        }
    }

    // On page load, set the video source to the appropriate video
    window.onload = function() {
        // Generate a random seed to differentiate video selection
        var randomSeed = Math.floor(Math.random() * videoLinks.length);
        var videoIndex = getNextVideoIndex();

        // Set the src attribute of the video element to the correct URL
        // Ensure that the video index changes based on the seed for new sessions
        var videoUrl = videoLinks[(videoIndex + randomSeed) % videoLinks.length];
        document.getElementById("video-player").src = videoUrl;
    }
</script>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Treasure Hunt Final Clue</h1>
    <!--<p>Your clue video is below:</p>-->

    <!-- Video player to embed the video -->
    <video id="video-player" width="640" height="360" controls autoplay muted loop>
        <source src="" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>
</html>

